+++
title = "查询优化"
description = "查询优化是数据库系统的一个重要话题。本文试图回答三个问题：什么是查询优化、为什么可以优化 SQL 查询以及如何进行查询优化。"
draft = false
weight = 250
sort_by = "weight"
template = "docs/page.html"

[extra]
lead = "查询优化是数据库系统的一个重要话题。本文试图回答三个问题：什么是查询优化、为什么可以优化 SQL 查询以及如何进行查询优化。"
toc = true
top = false
giscus = true
+++

## 什么是查询优化

查询优化指的是为给定的查询选择最佳执行计划。

那么什么样的执行计划称得上是最佳计划呢？

- 更快的速度（更低的延迟），这是一个非常直观的评价标准。
- 在 OLTP 场景下，则更强调性价比。
- 而对于 OLAP 场景，则追求更的高吞吐量。
- 从商业口号的角度看，可能偏向于一次“正确”的技术选型。

## 为什么可以优化 SQL 查询

目前有两种主要的查询优化方案，一种是基于关系代数和算法的等价优化方案，一种是基于评估成本的优化方案。

根据命名，不难看出优化的灵感来源和这两种方案在优化上的取舍。

## 如何进行查询优化

查询优化通常包含以下四个步骤：

- 构建框架来列举可能的计划
- 编写转换规则
- 引入成本模型来评估不同的计划
- 选择最理想的计划